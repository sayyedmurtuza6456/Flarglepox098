<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>Hero vs Chor</title>
<style>
html,body{
 margin:0;padding:0;overflow:hidden;
 background:linear-gradient(#87CEEB,#B0E0E6);
 height:100%;touch-action:manipulation;
}
canvas{display:block;margin:0 auto;touch-action:none;}
#startScreen,#retryScreen{
 position:absolute;inset:0;background:rgba(0,0,0,0.6);color:white;
 display:flex;flex-direction:column;justify-content:center;align-items:center;
 font-size:1.6rem;font-family:sans-serif;text-align:center;
}
button{
 background:orange;color:white;border:none;border-radius:12px;
 padding:12px 24px;font-size:1.2rem;margin-top:10px;
}
#musicToggle {
 position: absolute;
 top: 15px;
 right: 15px;
 background: rgba(0,0,0,0.5);
 color: white;
 border: 2px solid white;
 border-radius: 8px;
 padding: 8px 14px;
 font-size: 1rem;
 cursor: pointer;
 z-index: 1000;
}
</style>
</head>
<body>

<!-- üîä Game Sounds -->
<audio id="bgMusic" src="bg sound.mp3" preload="auto" loop></audio>
<audio id="eliminateSound" src="eliminate .mp3" preload="auto"></audio>

<!-- üéµ Music Toggle Button -->
<button id="musicToggle" onclick="toggleMusic()">üîä Music On</button>

<!-- üèÅ Screens -->
<div id="startScreen">
 <h2>üê¶ Hero vs Chor üê¶</h2>
 <button onclick="startGame()">Play</button>
</div>

<canvas id="game"></canvas>

<div id="retryScreen" style="display:none;">
 <div>üò© bc haar gaya main üò©</div>
 <button onclick="retryGame()">Retry</button>
</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
const bgMusic=document.getElementById("bgMusic");
const eliminateSound=document.getElementById("eliminateSound");
const startScreen=document.getElementById("startScreen");
const retryScreen=document.getElementById("retryScreen");
const musicToggle=document.getElementById("musicToggle");

canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let hero,chor,pillars,gravity=0.5,frame=0,gameOver=false,started=false;
let musicOn=true; // üéµ Music default ON

// ‚úÖ Unlock audio for mobile
function unlockAudio(){
  const tryPlay = s => {
    const p = s.play();
    if (p !== undefined){
      p.then(()=>{s.pause();s.currentTime=0;}).catch(()=>{});
    }
  };
  tryPlay(bgMusic);
  tryPlay(eliminateSound);
  document.body.removeEventListener("touchstart",unlockAudio);
}
document.body.addEventListener("touchstart",unlockAudio);

// üéµ Music toggle button function
function toggleMusic(){
  if(musicOn){
    bgMusic.pause();
    musicOn=false;
    musicToggle.textContent="üîá Music Off";
  }else{
    bgMusic.currentTime=0;
    bgMusic.volume=1;
    bgMusic.play().catch(()=>{});
    musicOn=true;
    musicToggle.textContent="üîä Music On";
  }
}

function resetGame(){
 hero={x:canvas.width*0.25,y:canvas.height/2,vy:0,size:50};
 chor={x:canvas.width*0.55,y:canvas.height/2,vy:0,size:50};
 pillars=[];
 frame=0;
 gameOver=false;
 createPillar();
}

function tap(){
 if(!started){
   started=true;
   if(musicOn){
     bgMusic.currentTime=0;
     bgMusic.volume=1;
     bgMusic.play().catch(()=>{});
   }
 }
 if(!gameOver){hero.vy=-8;}
}
document.body.addEventListener("touchstart",tap);
document.body.addEventListener("click",tap);

function createPillar(){
 const gap=canvas.height/4;
 const topH=Math.random()*(canvas.height/2);
 pillars.push({x:canvas.width,top:topH,bottom:topH+gap,width:90});
}

function drawPillars(){
 for(let p of pillars){
   ctx.drawImage(pillarImg,p.x,0,p.width,p.top);
   ctx.drawImage(pillarImg,p.x,p.bottom,p.width,canvas.height-p.bottom);
   p.x-=3;
 }
 if(pillars.length===0 || pillars[pillars.length-1].x < canvas.width - 250){
   createPillar();
 }
 pillars=pillars.filter(p=>p.x+p.width>0);
}

function drawHero(){ctx.drawImage(heroImg,hero.x,hero.y,hero.size,hero.size);}
function drawChor(){ctx.drawImage(chorImg,chor.x,chor.y,chor.size,chor.size);}

function update(){
 if(gameOver)return;
 ctx.clearRect(0,0,canvas.width,canvas.height);
 ctx.fillStyle="#87CEEB";
 ctx.fillRect(0,0,canvas.width,canvas.height);

 drawPillars();

 // Hero gravity
 hero.vy+=gravity; hero.y+=hero.vy;
 if(hero.y+hero.size>canvas.height)hero.y=canvas.height-hero.size;
 if(hero.y<0)hero.y=0;

 // Chor AI
 chor.vy+=gravity; chor.y+=chor.vy;
 if(pillars.length>0){
   let nextP=pillars.find(p=>p.x+p.width > chor.x) || pillars[0];
   if(nextP){
     const gapCenter=(nextP.top+nextP.bottom)/2;
     if(chor.y+chor.size/2 > gapCenter+25){chor.vy=-7;}
   }
 }
 if(chor.y+chor.size>canvas.height)chor.y=canvas.height-chor.size;
 if(chor.y<0)chor.y=0;

 drawChor(); drawHero();

 // Collision detection
 for(let p of pillars){
   if(hero.x<p.x+p.width && hero.x+hero.size>p.x && (hero.y<p.top || hero.y+hero.size>p.bottom)){
     endGame();
   }
 }
 if(hero.y+hero.size>=canvas.height){endGame();}

 frame++; requestAnimationFrame(update);
}

function endGame(){
 gameOver=true;
 bgMusic.pause();
 bgMusic.currentTime=0;
 eliminateSound.currentTime=0;
 eliminateSound.volume=1;
 eliminateSound.play().catch(()=>{});
 retryScreen.style.display="flex";
}

function retryGame(){
 retryScreen.style.display="none";
 resetGame();
 if(musicOn){
   bgMusic.currentTime=0;
   bgMusic.volume=1;
   bgMusic.play().catch(()=>{});
 }
 update();
}

function startGame(){
 startScreen.style.display="none";
 resetGame();
 if(musicOn){
   bgMusic.currentTime=0;
   bgMusic.volume=1;
   bgMusic.play().catch(()=>{});
 }
 update();
}

// üñºÔ∏è Images
const heroImg=new Image();
heroImg.src="https://i.supaimg.com/10c96281-2544-4f80-bf70-d2c974622a34.webp";
const chorImg=new Image();
chorImg.src="https://i.supaimg.com/0ea02f47-5674-45d0-bf53-aae22d1d6d8c.jpg";
const pillarImg=new Image();
pillarImg.src="https://i.supaimg.com/1b2c62da-613e-4001-917b-6bcd98f2232a.png";
</script>
</body>
</html>